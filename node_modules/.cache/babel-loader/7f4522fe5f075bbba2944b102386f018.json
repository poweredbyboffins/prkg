{"ast":null,"code":"var _jsxFileName = \"/home/andy/rr/consuming-rest/src/Graph.js\";\nimport React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport * as js from './jsondata';\n\nclass Graph extends React.Component {\n  constructor(props) {\n    super(props); //this.createGraph = this.createGraph(this);\n\n    this.myRef = React.createRef();\n  } //    static propTypes = {...}\n\n\n  componentDidMount() {\n    this.createGraph();\n  }\n\n  componentDidUpdate() {//this.createGraph(this.myRef)\n  }\n\n  componentWillMount() {//this.createGraph(this.myRef)\n  }\n\n  createGraph() {\n    // D3 Code to create the chart\n    // using this._rootNode as container\n    console.log(\"svgref\");\n    console.log(this.refs.svgref);\n    var svg = d3.select(this.refs.svgref),\n        width = +svg.attr(\"width\"),\n        height = +svg.attr(\"height\");\n    console.log(svg);\n    console.log(width);\n    var color = d3.scaleOrdinal(d3.schemeCategory10);\n    var simulation = d3.forceSimulation().force(\"link\", d3.forceLink().distance(100).id(function (d) {\n      return d.id;\n    })).force(\"charge\", d3.forceManyBody()).force(\"center\", d3.forceCenter(width / 2, height / 2));\n    console.log(\"here1\");\n    var jsdata = js;\n    console.log(jsdata.node);\n    var js = {\n      \"nodes\": [{\n        \"id\": \"Amazon\",\n        \"group\": 1,\n        \"size\": 5\n      }, {\n        \"id\": \"Cloud\",\n        \"group\": 2,\n        \"size\": 11\n      }],\n      \"links\": [{\n        \"source\": \"Amazon\",\n        \"target\": \"Cloud\",\n        \"value\": 5\n      }]\n    };\n    d3.json(js).then(function (graph) {\n      //if (error) throw error;\n      var link = svg.append(\"g\").attr(\"class\", \"links\").selectAll(\"line\").data(graph.links).enter().append(\"line\").attr(\"stroke-width\", function (d) {\n        return Math.sqrt(d.value);\n      });\n      var node = svg.append(\"g\").append(\"g\").attr(\"class\", \"nodes\").selectAll(\"g\").data(graph.nodes).enter().append(\"g\");\n      var circles = node.append(\"circle\").attr(\"r\", function (d) {\n        return d.size;\n      }).attr(\"fill\", function (d) {\n        return color(d.group);\n      }).call(d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended));\n      var lables = node.append(\"text\").text(function (d) {\n        return d.id;\n      }).attr('x', 6).attr('y', 3);\n      node.append(\"title\").text(function (d) {\n        return d.id;\n      });\n      simulation.nodes(graph.nodes).on(\"tick\", ticked);\n      simulation.force(\"link\").links(graph.links);\n\n      function ticked() {\n        link.attr(\"x1\", function (d) {\n          return d.source.x;\n        }).attr(\"y1\", function (d) {\n          return d.source.y;\n        }).attr(\"x2\", function (d) {\n          return d.target.x;\n        }).attr(\"y2\", function (d) {\n          return d.target.y;\n        });\n        node.attr(\"transform\", function (d) {\n          return \"translate(\" + d.x + \",\" + d.y + \")\";\n        });\n      }\n    });\n\n    function dragstarted(d) {\n      if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(d) {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    }\n\n    function dragended(d) {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    }\n  }\n  /*    shouldComponentUpdate() {\n          // Prevents component re-rendering\n          return false;\n      }\n  \n      _setRef(componentNode) {\n          this._rootNode = componentNode;\n      }\n  */\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Div\"), React.createElement(\"svg\", {\n      ref: \"svgref\",\n      width: \"900\",\n      height: \"600\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \" \", React.createElement(\"title\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"D3\"), \" \"));\n  }\n\n}\n\nexport default Graph;","map":{"version":3,"sources":["/home/andy/rr/consuming-rest/src/Graph.js"],"names":["React","Component","d3","js","Graph","constructor","props","myRef","createRef","componentDidMount","createGraph","componentDidUpdate","componentWillMount","console","log","refs","svgref","svg","select","width","attr","height","color","scaleOrdinal","schemeCategory10","simulation","forceSimulation","force","forceLink","distance","id","d","forceManyBody","forceCenter","jsdata","node","json","then","graph","link","append","selectAll","data","links","enter","Math","sqrt","value","nodes","circles","size","group","call","drag","on","dragstarted","dragged","dragended","lables","text","ticked","source","x","y","target","event","active","alphaTarget","restart","fx","fy","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport * as js from './jsondata'\n\nclass Graph extends React.Component {\nconstructor(props){\n      super(props)\n      //this.createGraph = this.createGraph(this);\n      this.myRef = React.createRef();\n   }\n\n//    static propTypes = {...}\n\n    componentDidMount() {\n       this.createGraph()\n    }\n    componentDidUpdate() {\n       //this.createGraph(this.myRef)\n    }\n    componentWillMount() {\n       //this.createGraph(this.myRef)\n    }\n    createGraph() {\n        // D3 Code to create the chart\n        // using this._rootNode as container\n     console.log(\"svgref\");\n     console.log(this.refs.svgref);\nvar svg = d3.select(this.refs.svgref),\n    width = +svg.attr(\"width\"),\n    height = +svg.attr(\"height\");\n     console.log(svg);\n     console.log(width);\n\nvar color = d3.scaleOrdinal(d3.schemeCategory10);\n\n\nvar simulation = d3.forceSimulation()\n    .force(\"link\", d3.forceLink().distance(100).id(function(d) { return d.id; }))\n    .force(\"charge\", d3.forceManyBody())\n    .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\n  console.log(\"here1\");\nvar jsdata=js\nconsole.log(jsdata.node)\nvar js={\"nodes\": [ {\"id\": \"Amazon\", \"group\": 1,\"size\": 5}, {\"id\": \"Cloud\", \"group\": 2,\"size\":11} ], \"links\": [ {\"source\": \"Amazon\", \"target\": \"Cloud\", \"value\": 5} ] };\n\nd3.json(js)\n.then(function(graph) {\n  //if (error) throw error;\n\nvar link = svg.append(\"g\")\n    .attr(\"class\", \"links\")\n    .selectAll(\"line\")\n    .data(graph.links)\n    .enter().append(\"line\")\n      .attr(\"stroke-width\", function(d) { return Math.sqrt(d.value); });\n\n    var node=svg.append(\"g\")\n    .append(\"g\")\n    .attr(\"class\", \"nodes\")\n    .selectAll(\"g\")\n    .data(graph.nodes)\n    .enter().append(\"g\")\n    \n  var circles = node.append(\"circle\")\n      .attr(\"r\", function(d) { return (d.size); })\n      .attr(\"fill\", function(d) { return color(d.group); })\n      .call(d3.drag()\n          .on(\"start\", dragstarted)\n          .on(\"drag\", dragged)\n          .on(\"end\", dragended));\n\n  var lables = node.append(\"text\")\n      .text(function(d) {\n        return d.id;\n      })\n      .attr('x', 6)\n      .attr('y', 3);\n\n  node.append(\"title\")\n      .text(function(d) { return d.id; });\n\n  simulation\n      .nodes(graph.nodes)\n      .on(\"tick\", ticked);\n\n  simulation.force(\"link\")\n      .links(graph.links);\n\n  function ticked() {\n    link\n        .attr(\"x1\", function(d) { return d.source.x; })\n        .attr(\"y1\", function(d) { return d.source.y; })\n        .attr(\"x2\", function(d) { return d.target.x; })\n        .attr(\"y2\", function(d) { return d.target.y; });\n\n    node\n        .attr(\"transform\", function(d) {\n          return \"translate(\" + d.x + \",\" + d.y + \")\";\n        })\n  }\n});\n\nfunction dragstarted(d) {\n  if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n  d.fx = d.x;\n  d.fy = d.y;\n}\n\nfunction dragged(d) {\n  d.fx = d3.event.x;\n  d.fy = d3.event.y;\n}\n\nfunction dragended(d) {\n  if (!d3.event.active) simulation.alphaTarget(0);\n  d.fx = null;\n  d.fy = null;\n}\n\n    }\n\n/*    shouldComponentUpdate() {\n        // Prevents component re-rendering\n        return false;\n    }\n\n    _setRef(componentNode) {\n        this._rootNode = componentNode;\n    }\n*/\n\n    render() {\nreturn (\n<div>\n<h1>Div</h1>\n<svg ref=\"svgref\" width=\"900\" height=\"600\"> <title>D3</title> </svg>\n</div>\n    )\n   }\n}\n\nexport default Graph;\n"]},"metadata":{},"sourceType":"module"}