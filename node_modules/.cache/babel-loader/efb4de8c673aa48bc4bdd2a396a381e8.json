{"ast":null,"code":"var _jsxFileName = \"/home/andy/rr/consuming-rest/src/Graph.js\";\nimport React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport { select } from 'd3-selection';\nimport { scaleOrdinal } from 'd3-scale';\n\nclass Graph extends React.Component {\n  constructor(props) {\n    super(props);\n    this.createGraph = this.createGraph(this);\n  } //    static propTypes = {...}\n\n\n  componentDidMount() {\n    this.createGraph();\n  }\n\n  componentDidUpdate() {\n    this.createGraph();\n  }\n\n  createGraph() {\n    const node = this.node; // D3 Code to create the chart\n    // using this._rootNode as container\n\n    var svg = select(node),\n        width = +svg.attr(\"width\"),\n        height = +svg.attr(\"height\");\n    var color = scaleOrdinal(d3.schemeCategory10);\n    var simulation = d3.forceSimulation().force(\"link\", d3.forceLink().distance(100).id(function (d) {\n      return d.id;\n    })).force(\"charge\", d3.forceManyBody()).force(\"center\", d3.forceCenter(width / 2, height / 2));\n    d3.json(\"miserables.json\", function (error, graph) {\n      if (error) throw error;\n      var link = svg.append(\"g\") //      .attr(\"class\", \"links\")\n      .selectAll(\"line\").data(graph.links).enter().append(\"line\").attr(\"stroke-width\", function (d) {\n        return Math.sqrt(d.value);\n      });\n      var node = svg.append(\"g\") //     .attr(\"class\", \"nodes\")\n      .selectAll(\"g\").data(graph.nodes).enter().append(\"g\");\n      var circles = node.append(\"circle\").attr(\"r\", function (d) {\n        return d.size;\n      }).attr(\"fill\", function (d) {\n        return color(d.group);\n      }).call(d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended));\n      var lables = node.append(\"text\").text(function (d) {\n        return d.id;\n      }).attr('x', 6).attr('y', 3);\n      node.append(\"title\").text(function (d) {\n        return d.id;\n      });\n      simulation.nodes(graph.nodes).on(\"tick\", ticked);\n      simulation.force(\"link\").links(graph.links);\n\n      function ticked() {\n        link.attr(\"x1\", function (d) {\n          return d.source.x;\n        }).attr(\"y1\", function (d) {\n          return d.source.y;\n        }).attr(\"x2\", function (d) {\n          return d.target.x;\n        }).attr(\"y2\", function (d) {\n          return d.target.y;\n        });\n        node.attr(\"transform\", function (d) {\n          return \"translate(\" + d.x + \",\" + d.y + \")\";\n        });\n      }\n    });\n\n    function dragstarted(d) {\n      if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(d) {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    }\n\n    function dragended(d) {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    }\n  }\n\n  shouldComponentUpdate() {\n    // Prevents component re-rendering\n    return false;\n  }\n\n  _setRef(componentNode) {\n    this._rootNode = componentNode;\n  }\n\n  render() {\n    //        <div className=\"line-container\" ref={this._setRef.bind(this)} \n    //return (<svg id=\"svgid\" width=\"960\" height=\"600\"></svg>)\n    return React.createElement(\"svg\", {\n      ref: node => this.node = node,\n      width: 900,\n      height: 600,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Graph;","map":{"version":3,"sources":["/home/andy/rr/consuming-rest/src/Graph.js"],"names":["React","Component","d3","select","scaleOrdinal","Graph","constructor","props","createGraph","componentDidMount","componentDidUpdate","node","svg","width","attr","height","color","schemeCategory10","simulation","forceSimulation","force","forceLink","distance","id","d","forceManyBody","forceCenter","json","error","graph","link","append","selectAll","data","links","enter","Math","sqrt","value","nodes","circles","size","group","call","drag","on","dragstarted","dragged","dragended","lables","text","ticked","source","x","y","target","event","active","alphaTarget","restart","fx","fy","shouldComponentUpdate","_setRef","componentNode","_rootNode","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport { select } from 'd3-selection'\nimport { scaleOrdinal } from 'd3-scale'\n\nclass Graph extends React.Component {\nconstructor(props){\n      super(props)\n      this.createGraph = this.createGraph(this)\n   }\n\n//    static propTypes = {...}\n\n    componentDidMount() {\n       this.createGraph()\n    }\n    componentDidUpdate() {\n       this.createGraph()\n    }\n    createGraph() {\n       const node = this.node\n        // D3 Code to create the chart\n        // using this._rootNode as container\n    var svg = select(node),\n    width = +svg.attr(\"width\"),\n    height = +svg.attr(\"height\");\n\nvar color = scaleOrdinal(d3.schemeCategory10);\n\nvar simulation = d3.forceSimulation()\n    .force(\"link\", d3.forceLink().distance(100).id(function(d) { return d.id; }))\n    .force(\"charge\", d3.forceManyBody())\n    .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\nd3.json(\"miserables.json\", function(error, graph) {\n  if (error) throw error;\n\n  var link = svg.append(\"g\")\n//      .attr(\"class\", \"links\")\n    .selectAll(\"line\")\n    .data(graph.links)\n    .enter().append(\"line\")\n      .attr(\"stroke-width\", function(d) { return Math.sqrt(d.value); });\n\n  var node = svg.append(\"g\")\n //     .attr(\"class\", \"nodes\")\n    .selectAll(\"g\")\n    .data(graph.nodes)\n    .enter().append(\"g\")\n    \n  var circles = node.append(\"circle\")\n      .attr(\"r\", function(d) { return (d.size); })\n      .attr(\"fill\", function(d) { return color(d.group); })\n      .call(d3.drag()\n          .on(\"start\", dragstarted)\n          .on(\"drag\", dragged)\n          .on(\"end\", dragended));\n\n  var lables = node.append(\"text\")\n      .text(function(d) {\n        return d.id;\n      })\n      .attr('x', 6)\n      .attr('y', 3);\n\n  node.append(\"title\")\n      .text(function(d) { return d.id; });\n\n  simulation\n      .nodes(graph.nodes)\n      .on(\"tick\", ticked);\n\n  simulation.force(\"link\")\n      .links(graph.links);\n\n  function ticked() {\n    link\n        .attr(\"x1\", function(d) { return d.source.x; })\n        .attr(\"y1\", function(d) { return d.source.y; })\n        .attr(\"x2\", function(d) { return d.target.x; })\n        .attr(\"y2\", function(d) { return d.target.y; });\n\n    node\n        .attr(\"transform\", function(d) {\n          return \"translate(\" + d.x + \",\" + d.y + \")\";\n        })\n  }\n});\n\nfunction dragstarted(d) {\n  if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n  d.fx = d.x;\n  d.fy = d.y;\n}\n\nfunction dragged(d) {\n  d.fx = d3.event.x;\n  d.fy = d3.event.y;\n}\n\nfunction dragended(d) {\n  if (!d3.event.active) simulation.alphaTarget(0);\n  d.fx = null;\n  d.fy = null;\n}\n\n    }\n\n    shouldComponentUpdate() {\n        // Prevents component re-rendering\n        return false;\n    }\n\n    _setRef(componentNode) {\n        this._rootNode = componentNode;\n    }\n\n    render() {\n//        <div className=\"line-container\" ref={this._setRef.bind(this)} \n//return (<svg id=\"svgid\" width=\"960\" height=\"600\"></svg>)\nreturn <svg ref={node => this.node = node}\n      width={900} height={600}>\n      </svg>\n    }\n}\n\nexport default Graph;\n"]},"metadata":{},"sourceType":"module"}